<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>XZ Utils: liblzma/common/block_encoder.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">XZ Utils
   &#160;<span id="projectnumber">5.1.0alpha</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2e0898c272e1f0f93c8ef15f5da2a912.html">liblzma</a></li><li class="navelem"><a class="el" href="dir_db777975f8e21a5de5f283e04473bf67.html">common</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">block_encoder.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Encodes .xz Blocks.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="common_8h.html">common.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af8472aaceeea218b7d9165bc651dff6f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="block__encoder_8h.html#af8472aaceeea218b7d9165bc651dff6f">COMPRESSED_SIZE_MAX</a></td></tr>
<tr class="memdesc:af8472aaceeea218b7d9165bc651dff6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Biggest Compressed Size value that the Block encoder supports.  <a href="#af8472aaceeea218b7d9165bc651dff6f"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a89c401647b51c72c5435b91307a6fb4c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89c401647b51c72c5435b91307a6fb4c"></a>
<a class="el" href="base_8h.html#a8494e0457e1463d6d2b6836018d87b6e">lzma_ret</a>&#160;</td><td class="memItemRight" valign="bottom"><b>lzma_block_encoder_init</b> (<a class="el" href="structlzma__next__coder__s.html">lzma_next_coder</a> *next, <a class="el" href="structlzma__allocator.html">lzma_allocator</a> *allocator, <a class="el" href="structlzma__block.html">lzma_block</a> *block)</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Encodes .xz Blocks. </p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="af8472aaceeea218b7d9165bc651dff6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMPRESSED_SIZE_MAX</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((<a class="code" href="vli_8h.html#a7b782528bd1934db7c020adbedb20ec9" title="Maximum supported value of a variable-length integer.">LZMA_VLI_MAX</a> - LZMA_BLOCK_HEADER_SIZE_MAX \</div>
<div class="line">                - <a class="code" href="api_2lzma_2check_8h.html#a379e931cf86351ab1d97896cda9abbe0" title="Maximum size of a Check field.">LZMA_CHECK_SIZE_MAX</a>) &amp; ~<a class="code" href="vli_8h.html#a2d8bf5322898bfa11945848420585881" title="VLI constant suffix.">LZMA_VLI_C</a>(3))</div>
</div><!-- fragment -->
<p>Biggest Compressed Size value that the Block encoder supports. </p>
<p>The maximum size of a single Block is limited by the maximum size of a Stream, which in theory is 2^63 - 3 bytes (i.e. LZMA_VLI_MAX - 3). While the size is really big and no one should hit it in practice, we take it into account in some places anyway to catch some errors e.g. if application passes insanely big value to some function.</p>
<p>We could take into account the headers etc. to determine the exact maximum size of the Compressed Data field, but the complexity would give us nothing useful. Instead, limit the size of Compressed Data so that even with biggest possible Block Header and Check fields the total encoded size of the Block stays as a valid VLI. This doesn't guarantee that the size of the Stream doesn't grow too big, but that problem is taken care outside the Block handling code.</p>
<p>~LZMA_VLI_C(3) is to guarantee that if we need padding at the end of the Compressed Data field, it will still stay in the proper limit.</p>
<p>This constant is in this file because it is needed in both <a class="el" href="block__encoder_8c.html" title="Encodes .xz Blocks.">block_encoder.c</a> and <a class="el" href="block__buffer__encoder_8c.html" title="Single-call .xz Block encoder.">block_buffer_encoder.c</a>. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 5 2014 14:24:09 for XZ Utils by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
